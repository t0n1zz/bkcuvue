import AsetTetapLokasiAPI from '../../api/asetTetapLokasi';

export const asetTetapLokasi = {
    namespaced: true,

    // state
    state: {
        data: {}, //single data
        dataS: [], //collection
        dataStat: '',
        dataStatS: '',
        update: [], //update data
        updateStat: '',
        rules: [], //laravel rules
        options: [], //laravel options
    },

    // getters
    getters: {
        data: state => state.data,
        dataS: state => state.dataS,
        dataStat: state => state.dataStat,
        dataStatS: state => state.dataStatS,
        update: state => state.update,
        updateStat: state => state.updateStat,
        rules: state => state.rules,
        options: state => state.options,
    },

    actions: {
        //load collection with params
        index({ commit }, p) {
            commit('setDataStatS', 'loading');

            AsetTetapLokasiAPI.index(p)
                .then(function(response) {
                    commit('setDataS', response.data.model);
                    commit('setDataStatS', 'success');
                })
                .catch(error => {
                    commit('setDataS', error.response);
                    commit('setDataStatS', 'fail');
                });
        },

        // create page
        create({ commit }) {
            commit('setDataStat', 'loading');

            AsetTetapLokasiAPI.create()
                .then(function(response) {
                    commit('setData', response.data.form);
                    commit('setRules', response.data.rules);
                    commit('setOptions', response.data.options)
                    commit('setDataStat', 'success');
                })
                .catch(error => {
                    commit('setData', error.response);
                    commit('setRules', []);
                    commit('setOptions', [])
                    commit('setDataStat', 'fail');
                });
        },

        get({ commit }) {
            commit('setDataStatS', 'loading');

            AsetTetapLokasiAPI.get()
                .then(function(response) {
                    commit('setDataS', response.data.model);
                    commit('setDataStatS', 'success');
                })
                .catch(error => {
                    commit('setDataS', error.response);
                    commit('setDataStatS', 'fail');
                });
        },

        //store data
        store({ commit, state, dispatch }, form) {
            commit('setUpdateStat', 'loading');

            AsetTetapLokasiAPI.store(form)
                .then(function(response) {
                    if (response.data.saved) {
                        commit('setUpdate', response.data);
                        commit('setUpdateStat', 'success');
                    } else {
                        commit('setUpdateStat', 'fail');
                    }
                })
                .catch(error => {
                    commit('setUpdate', error.response);
                    commit('setUpdateStat', 'fail');
                });
        },


        // edit page
        edit({ commit }, id) {
            commit('setDataStat', 'loading');

            AsetTetapLokasiAPI.edit(id)
                .then(function(response) {
                    commit('setData', response.data.form);
                    commit('setRules', response.data.rules);
                    commit('setOptions', response.data.options)
                    commit('setDataStat', 'success');
                })
                .catch(error => {
                    commit('setData', error.response);
                    commit('setRules', []);
                    commit('setOptions', [])
                    commit('setDataStat', 'fail');
                });
        },

        // update data
        update({ commit, state, dispatch }, [id, form]) {
            commit('setUpdateStat', 'loading');

            AsetTetapLokasiAPI.update(id, form)
                .then(function(response) {
                    if (response.data.saved) {
                        commit('setUpdate', response.data);
                        commit('setUpdateStat', 'success');
                    } else {
                        commit('setUpdateStat', 'fail');
                    }
                })
                .catch(error => {
                    commit('setUpdate', error.response);
                    commit('setUpdateStat', 'fail');
                });
        },

        // destroy data
        destroy({ commit, state, dispatch }, id) {
            commit('setUpdateStat', 'loading');

            AsetTetapLokasiAPI.destroy(id)
                .then(function(response) {
                    if (response.data.deleted) {
                        commit('setUpdate', response.data);
                        commit('setUpdateStat', 'success');
                    } else {
                        commit('setUpdateStat', 'fail');
                    }
                })
                .catch(error => {
                    commit('setUpdate', error.response);
                    commit('setUpdateStat', 'fail');
                });
        },

        // reset
        resetDataS({ commit }) {
            commit('setDataS', []);
            commit('setDataStatS', []);
        },
        resetDataStat({ commit }) {
            commit('setDataStat', '');
        },
        resetUpdateStat({ commit }) {
            commit('setUpdateStat', '');
        }
    },

    // mutations
    mutations: {
        setData(state, data) {
            state.data = data;
        },
        setDataS(state, data) {
            state.dataS = data;
        },
        setDataStat(state, status) {
            state.dataStat = status;
        },
        setDataStatS(state, status) {
            state.dataStatS = status;
        },
        setUpdate(state, data) {
            state.update = data;
        },
        setUpdateStat(state, status) {
            state.updateStat = status;
        },
        setRules(state, rules) {
            state.rules = rules;
        },
        setOptions(state, options) {
            state.options = options;
        }
    }
}